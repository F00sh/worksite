<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Work – Worksite</title>

    <!-- Tailwind build injected by Vite -->
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  <body class="min-h-screen flex flex-col bg-gray-900 text-white overflow-x-hidden">
    <!-- ──────────  Navbar  ────────── -->
    <nav class="sticky top-0 z-10 bg-gray-800/90 backdrop-blur flex items-center justify-between px-6 md:px-16 h-14 md:h-20">
      <a href="/index.html" class="text-lg font-extrabold tracking-wide hover:text-emerald-400">Home</a>
      <ul class="flex gap-4 md:gap-8 text-sm md:text-base font-semibold uppercase tracking-wide">
        <li><button data-filter="3d"        class="filter-btn hover:text-emerald-400">3D</button></li>
        <li><button data-filter="graphics"  class="filter-btn hover:text-emerald-400">Graphics</button></li>
        <li><button data-filter="animation" class="filter-btn hover:text-emerald-400">Animation</button></li>
        <li><button data-filter="all"       class="filter-btn text-emerald-400">All</button></li>
      </ul>
    </nav>

    <!-- ──────────  Project Grid  ────────── -->
    <main class="w-full max-w-7xl mx-auto px-4 py-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="projectsGrid">
      <!-- 18 squares generated by JS -->
    </main>

    <!-- ──────────  Modal  ────────── -->
    <div id="modal" class="fixed flex inset-0 z-50 hidden items-center justify-center w-screen h-screen">
      <div id="backdrop" class="absolute inset-0 bg-black/30 backdrop-blur-sm"></div>

      <div id="dialog" class="relative mx-auto w-11/12 md:w-4/5 lg:w-3/4 max-w-screen max-h-[90vh] overflow-y-auto bg-gray-800 rounded-3xl shadow-2xl p-6 md:p-12 grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- ✕ Close button -->
        <button id="closeModal" class="absolute top-4 right-4 text-3xl leading-none hover:text-emerald-400">&times;</button>

        <!-- Copy column -->
        <div>
          <h2 id="modalTitle" class="text-3xl md:text-4xl font-extrabold mb-4"></h2>
          <p id="modalDesc" class="text-base md:text-lg leading-relaxed"></p>
        </div>

        <!-- Carousel column -->
        <div class="flex flex-col items-center gap-4">
          <img id="carouselImg" src="" alt="Project image" class="w-full rounded-xl shadow-lg object-cover" />
          <div class="flex gap-6 text-3xl">
            <button id="prevBtn" class="hover:text-emerald-400" aria-label="Previous">&#10094;</button>
            <button id="nextBtn" class="hover:text-emerald-400" aria-label="Next">&#10095;</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ──────────  Scripts  ────────── -->
    <script type="module">
      // ===== Data =========
      const placeholders = ['/assets/table.png', '/assets/printer.png', '/assets/wireframe.png'];
      const sampleProjects = Array.from({ length: 18 }, (_, i) => {
        const cat = i % 3 === 0 ? '3d' : i % 3 === 1 ? 'graphics' : 'animation';
        return {
          id: `p${i}`,
          category: cat,
          title: `${cat.toUpperCase()} Project ${i + 1}`,
          desc: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt.',
          images: placeholders.sort(() => Math.random() - 0.5), // shuffle
        };
      });

      // ===== Populate Grid =========
      const grid = document.getElementById('projectsGrid');
      sampleProjects.forEach(pr => {
        const card = document.createElement('div');
        card.className = `group relative aspect-square overflow-hidden rounded-2xl shadow-lg cursor-pointer transform transition duration-500 bg-cover bg-center hover:scale-105`;
        card.style.backgroundImage = `url('${pr.images[0]}')`;
        card.dataset.category = pr.category;
        card.dataset.id = pr.id;

        // overlay
        card.innerHTML = `
          <div class="absolute inset-0 bg-white/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center text-gray-900 p-4 text-center">
            <h3 class="text-xl font-bold mb-2">${pr.title}</h3>
            <p class="text-sm leading-snug">${pr.desc}</p>
          </div>`;

        grid.appendChild(card);
      });

      // ===== Filtering =========
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const filter = btn.dataset.filter;
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('text-emerald-400'));
          btn.classList.add('text-emerald-400');

          document.querySelectorAll('#projectsGrid > div').forEach(card => {
            card.classList.toggle('hidden', filter !== 'all' && card.dataset.category !== filter);
          });
        });
      });

      // ===== Modal Logic =========
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modalTitle');
      const modalDesc  = document.getElementById('modalDesc');
      const carouselImg = document.getElementById('carouselImg');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      let currentImages = [];
      let imgIndex = 0;

      const openModal = (project) => {
        modalTitle.textContent = project.title;
        modalDesc.textContent  = project.desc;
        currentImages = project.images;
        imgIndex = 0;
        carouselImg.src = currentImages[imgIndex];
        modal.classList.remove('hidden');
      };

      grid.addEventListener('click', e => {
        const card = e.target.closest('[data-id]');
        if (!card) return;
        const proj = sampleProjects.find(p => p.id === card.dataset.id);
        openModal(proj);
      });

      const showImg = (dir) => {
        imgIndex = (imgIndex + dir + currentImages.length) % currentImages.length;
        carouselImg.src = currentImages[imgIndex];
      };
      prevBtn.addEventListener('click', () => showImg(-1));
      nextBtn.addEventListener('click', () => showImg(1));

      // Close modal
      document.getElementById('closeModal').addEventListener('click', () => modal.classList.add('hidden'));
      document.getElementById('backdrop').addEventListener('click', () => modal.classList.add('hidden'));
      document.addEventListener('keydown', e => e.key === 'Escape' && !modal.classList.contains('hidden') && modal.classList.add('hidden'));
    </script>
  </body>
</html>
